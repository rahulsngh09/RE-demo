<sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html">
    <sly data-sly-call="${clientlib.all @ categories='mysite-questionnaire'}" />
</sly>

<sly data-sly-use.model="com.mysite.core.models.QuestionnaireOptions">
    <div>
        <section class="section-one">
            <div id="questionnaire" class="questionnaire-section active">
                <div class="container">
                    <p class="help-me-choose">HELP ME CHOOSE . Step 1/5</p>
                    <p class="question">${model.question}</p>
                    <p class="drag-to-rearrange">Drag to rearrange.</p>
                    <ul class="sortable answers">
                        <sly data-sly-list.answers="${model.answers}">
                            <div class="answer-container">
                                <p class="answer-id-box">#${answers.index}</p>
                                <div class="answer-section">
                                    <li data-value="${answers.answer}" class="sortable-item section1">
                                        <div>
                                            <span>
                                                <img src="${model.draggableIcon}" alt="">
                                            </span>
                                        </div>
                                        ${answers.answer}
                                    </li>
                                </div>
                            </div>
                        </sly>

                    </ul>
                    <div class="buttton-container first">
                        <button type="button" class="next" data-next-section="#section2"
                            onclick="storePreferences();">NEXT</button>
                    </div>
                </div>
            </div>


            <div id="section2" class="questionnaire-section">
                <p class="help-me-choose">HELP ME CHOOSE . Step 2/5</p>
                <p class="question">${model.question2}</p>
                <p class="drag-to-rearrange">Select any one.</p>
                <ul>
                    <li data-sly-repeat.screen2Answer="${model.screen2Answers}" style="cursor: pointer;"
                        class="option-item">
                        <input type="radio" name="pillion" value=" ${screen2Answer}" id="myCheckbox"
                            class="option-checkbox">
                        <label style="cursor: pointer;">${screen2Answer}</label>
                    </li>

                </ul>
                <div class="buttton-container">
                    <button type="button" class="prev" data-prev-section="#questionnaire">BACK</button>
                    <button type="button" id="nextButton" class="next" onclick="checkSelection();"
                        data-next-section="#section3" disabled>NEXT</button>
                </div>
            </div>


            <div id="section3" class="questionnaire-section">
                <p class="help-me-choose">HELP ME CHOOSE . Step 3/5</p>
                <p class="question">${model.question3}</p>
                <p class="drag-to-rearrange">Drag to rearrange.</p>
                <ul class="sortable answers" style="margin-left: 2rem;">

                    <li data-sly-repeat.screen3Answers="${model.optionWithImages}" class="sortable-item section3"
                        data-value="${screen3Answers.text}"
                        style="background-size:100%; background-image: linear-gradient(93.59deg, #000000 0.45%, rgba(0, 0, 0, 0.573648) 45.64%, rgba(0, 0, 0, 0) 108.5%), url('${screen3Answers.backgroundImage @ context='uri'}');">
                        <div class="answer-container answer-container2">
                            <p class="answer-id-box">#${screen3AnswersList.index}</p>
                        </div><img src="${model.draggableIcon}" alt=""> ${screen3Answers.text}
                    </li>
                </ul>

                <div class="buttton-container">
                    <button type="button" class="prev" data-prev-section="#section2">BACK</button>
                    <button type="button" class="next" onclick="placeToRide();"
                        data-next-section="#section4">NEXT</button>
                </div>

            </div>


            <div id="section4" class="questionnaire-section">
                <p class="help-me-choose">HELP ME CHOOSE . Step 4/5</p>
                <p class="question">${model.question4}</p>
                <div class="notification">
                    <button class="close-btn" aria-label="Close">&times;</button>
                    <p id="notification-message"></p>
                </div> <!-- Notification element -->
                <div class="image-grid">
                    <sly data-sly-list.authoredImages="${model.allAuthoredImages}">

                        <div class="image-card" data-image-id=${authoredImagesList.index}
                            data-sly-attribute.customAttr="${model.ridingPositionImageAttributes[authoredImagesList.index]}">
                            <div class="img-div">
                                <img src="${authoredImages}" alt="Motorcycle Riding Position" class="selectable-image">
                            </div>
                            <div class="overlay" style="
                            width: 174px;
                            height: 120px;">
                                <div class="checkmark"><img src="${properties.tickBtnIcon}" alt=""></div>
                            </div>
                        </div>

                    </sly>
                </div>
                <div class="buttton-container">
                    <button type="button" class="prev" data-prev-section="#section3">BACK</button>
                    <button type="button" class="next riding button-section" data-next-section="#section5"
                        id="callApiBtn" onclick="imageTagAttribute();" disabled>NEXT</button>
                </div>
            </div>


            <div id="section5" class="questionnaire-section">
                <p class="help-me-choose">HELP ME CHOOSE . Step 5/5</p>
                <p class="question">${properties.question5}</p>

                <div class="notification">
                    <button class="close-btn" aria-label="Close">&times;</button>

                </div> <!-- Notification element -->
                <div class="image-grid">

                    <div class="personal-interest" id="image-card">
                        <div class="help-me-choose-box " id="img-div">

                        </div>
                        <div class="overlay" style="
                        width: 172px;
                        height: 120px;">
                            <div class="checkmark"><img src="${properties.tickBtnIcon}" alt=""
                                    id="select-tick-img" data-image-url="${properties.tickBtnIcon}"></div>
                        </div>
                    </div>

                </div>
                <div class="buttton-container">
                    <button type="button" class="prev" id="back-button" data-prev-section="#section4">BACK</button>
                    <button type="button" class="next" id="section5Btn" data-next-section="#main-section"
                        disabled>NEXT</button>
                </div>
            </div>



            <!-- Handlebars template -->
            <div class="main-background" id="main-section">
            </div>


            <div id="test-ride-form" class="form-overlay" style="display: none;">
                <div class="form-container">
                    <h2>Get a call from our product experts and find your next motorcycle</h2>
                    <button class="close-btn" aria-label="Close">&times;</button>
                    <form id="callbackForm" action="/path/to/servlet" method="post" onsubmit="return validateForm()">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" class="inputformdata" name="fullName" required
                                oninput="validateFullName(this)" pattern="[A-Za-z\s]+"
                                title="Please enter only letters.">
                            <span class="error-message" id="nameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="phoneNumber">Phone Number</label>
                            <div class="phone-input">
                                <!-- <span>+91</span> -->
                                <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="+91" required
                                    oninput="validatePhoneNumber(this)" pattern="\d{10}"
                                    title="Please enter a 10-digit phone number.">
                            </div>
                            <span class="error-message" id="phoneError"></span>
                        </div>
                        <div class="form-group">
                            <label for="emailId">E-mail ID</label>
                            <input type="email" id="emailId" class="inputformdata" name="emailId" required
                                oninput="validateEmail(this)">
                            <span class="error-message" id="emailError"></span>
                        </div>
                        <div class="form-group">
                            <label for="pincode">Pincode</label>
                            <input type="text" id="pincode" class="inputformdata" name="pincode" required
                                oninput="validatePincode(this)" pattern="\d{6}"
                                title="Please enter a valid 6-digit pincode.">
                            <span class="error-message" id="pincodeError"></span>
                        </div>
                        <p class="disclaimer">Disclaimer: By submitting this form you acknowledge and agree to our
                            <a href="#">terms and conditions</a> and <a href="#">privacy policy</a>.
                            All information provided will be secured and processed as per our privacy policy.
                        </p>
                        <div class="form-group terms-group">
                            <input type="checkbox" id="agree" name="agree" required>
                            <label for="agree">I agree to <a href="#">Terms & Conditions</a> and <a href="#">Privacy
                                    Policy</a></label>
                        </div>
                        <button type="submit" class="submit-btn" disabled>REQUEST A CALLBACK</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

</sly>

<script id="bike-template" type="text/x-handlebars-template">
    <h2 class="section-title">Meet your next Royal Enfield Motorcycle</h2>
    <div class="bike-cards">
        {{#each bikes}}
            <div style="height: 543px; background-color: #000; border: 2px solid grey; border-radius: 6px;">
                <div>
                    <div class="bike-card">
                        <div class="nameAndImgDiv">
                            <h3 style="margin: 0px;">{{bikeName}}</h3>
                            <span><img src="{{forwardIcon}}" alt="Forward Icon"></span>
                        </div>
                        
                        <div class="bike-image-container">
                            <div class="hero-image">
                                <img src="{{bikeHeroImage}}" alt="{{bikeName}} Image" class="hero-image" width="289px" height="178px">
                            </div>
                        </div>
                        
                        <p style="display: flex; justify-content: center;"><strong>Starts from â‚¹</strong> {{bikePrice}}</p>
                        <div class="image-thumbnails">
                            {{#each bikeSmallImages}}
                                <img src="{{this}}" alt="Small Image" >
                            {{/each}}
                        </div>

                        <div class="bike-info">
                            <ul class="bike-features">
                                {{#each bikeFeatures}}
                                    <li>{{this}}</li>
                                {{/each}}
                            </ul>
                        </div>
                    </div>

                   
                </div>
                <div class="actions">
                    <button class="configure-btn prev">CONFIGURE NOW</button>
                    <button class="test-ride-btn" id="book-a-test-ride" style="
                        display: flex;
                        height: 40px;
                        width: 204px;
                        padding: 8px 16px;
                        cursor: pointer;
                        align-items: center;
                        justify-content: center;
                        font-size: 12px;
                        font-weight: 700;
                    ">BOOK A TEST RIDE</button>
    
                </div>
            </div>
        {{/each}}

       

    </div>
    <div class="cta-message">
        <p>
            <a href="#" class="retry-link">Get more recommandations</a>
        </p>
    </div>
</script>

<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>